(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{17:function(e,n,t){e.exports=t(39)},39:function(e,n,t){"use strict";t.r(n);var o=t(0),a=t.n(o),r=t(14),c=t.n(r),l=(t(5),t(16)),s=t(15),i=t(2),u=function(e){var n=e.filterName,t=e.handleFilterChange;return a.a.createElement("div",null,"filter shown with",a.a.createElement("input",{value:n,onChange:t}))},d=function(e){var n=e.onSubmitAddContact,t=e.newName,o=e.handleNameChange,r=e.newNumber,c=e.handleNumberChange;return a.a.createElement("div",null,a.a.createElement("form",{onSubmit:n},a.a.createElement("div",null,"name: ",a.a.createElement("input",{value:t,onChange:o,type:"text",required:!0})),a.a.createElement("div",null,"number: ",a.a.createElement("input",{value:r,onChange:c,type:"number",required:!0})),a.a.createElement("div",null,a.a.createElement("button",{type:"submit"},"add"))))},m=function(e){var n=e.handleDeleteContact,t=e.text;return a.a.createElement("button",{onClick:n,className:"buttonDelete"}," ",t," ")},f=function(e){var n=e.handleDeleteContact,t=e.persons,o=e.filterName;return a.a.createElement("div",null,t.map((function(e){return e.name.toLowerCase().includes(o.toLowerCase())?a.a.createElement("span",{key:e.name},a.a.createElement("p",null,e.name,"  ",e.number,a.a.createElement(m,{handleDeleteContact:function(t){return n(e.id,t)},text:"delete"}))):""})))},h=t(3),g=t.n(h),p="/api/persons",b=function(){return g.a.get(p).then((function(e){return e.data}))},v=function(e){return g.a.post(p,e).then((function(e){return e.data}))},w=function(e,n){return g.a.put("".concat(p,"/").concat(e),n).then((function(e){return e.data}))},y=function(e){return g.a.delete("".concat(p,"/").concat(e)).then((function(e){return e.data}))},E=function(e){var n=e.notification,t=n.message,o=n.classStyle;return null===t?null:a.a.createElement("div",{className:o},t)};function O(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}var N=function(){var e=Object(o.useState)([]),n=Object(i.a)(e,2),t=n[0],r=n[1],c=Object(o.useState)(""),m=Object(i.a)(c,2),h=m[0],g=m[1],p=Object(o.useState)(""),N=Object(i.a)(p,2),j=N[0],C=N[1],S=Object(o.useState)(""),k=Object(i.a)(S,2),D=k[0],P=k[1],A=Object(o.useState)({message:"",classStyle:""}),T=Object(i.a)(A,2),J=T[0],x=T[1];Object(o.useEffect)((function(){console.log("effect"),b().then((function(e){console.log("fetched data",e),r(e)}))}),[]),console.log("render",t.length,"persons"),console.log("render Contact list ",t,"persons");return a.a.createElement("div",{id:"content"},a.a.createElement("h2",null,"Phonebook"),a.a.createElement(E,{notification:J}),a.a.createElement(u,{filterName:D,handleFilterChange:function(e){console.log("Handle Filter Change",e.target.value),P(e.target.value)}}),a.a.createElement("h3",null,"Add a new"),a.a.createElement(d,{onSubmitAddContact:function(e){e.preventDefault();var n={name:h,number:j};console.log("Add contact",h),console.log("Add contact person",t);var o=t.map((function(e){return e.name}));console.log("New person list",o);var a=o.includes(h);if(console.log("check isNewPerson",a),a){if(window.confirm("".concat(h," is already added to phonebook, replace the old one a with new one?"))){var c=t.find((function(e){return e.name===h})),i=function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?O(t,!0).forEach((function(n){Object(s.a)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):O(t).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}({},c,{number:n.number});w(c.id,i).then((function(e){r(t.map((function(n){return n.id!==e.id?n:e}))),console.log("New person added: ",e),x({message:"Entry ".concat(c.name," updated!"),classStyle:"success"}),setTimeout((function(){x({})}),5e3),C(""),g("")})).catch((function(e){console.log(e.response),r(t.filter((function(e){return e.id!==c.id}))),x({message:JSON.stringify(e.response.data.error),classStyle:"error"}),setTimeout((function(){x({})}),5e3)}))}}else v(n).then((function(e){r([].concat(Object(l.a)(t),[e])),console.log("New person added: ",e),x({message:"Entry ".concat(e.name," added!"),classStyle:"success"}),setTimeout((function(){x({})}),5e3),g(""),C("")})).catch((function(e){console.log(e.response.data),x({message:JSON.stringify(e.response.data.error),classStyle:"error"}),setTimeout((function(){x({})}),5e3)}))},newName:h,handleNameChange:function(e){console.log("Handle Name Change",e.target.value),g(e.target.value)},newNumber:j,handleNumberChange:function(e){console.log("Handle Number Change",e.target.value),C(e.target.value)}}),a.a.createElement("h3",null,"Numbers"),a.a.createElement(f,{handleDeleteContact:function(e,n){n.preventDefault(),console.log("check handleDeleteContact",t," :",e);var o=t.find((function(n){return n.id===e}));console.log("name  to Delete",o);var a=t.filter((function(n){return n.id!==e}));console.log("check isNewPerson",a);var c=a.includes(h);console.log("check isNewPerson",c);var l=window.confirm("Delete ".concat(o.name));o&&l&&y(e).then((function(e){console.log("Add contact to persons",e),r(a),x({message:" ".concat(o.name," is just deleted from phonebook "),classStyle:"error"}),setTimeout((function(){x({})}),5e3)})).catch((function(e){console.log(e.response.data),x({message:JSON.stringify(e.response.data.error),classStyle:"error"}),setTimeout((function(){x({})}),5e3)}))},persons:t,filterName:D}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement(N,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},5:function(e,n,t){}},[[17,1,2]]]);
//# sourceMappingURL=main.548888d0.chunk.js.map